<odoo>
  <data>

     <record id="job_form" model="ir.ui.view">
        <field name="model">runbot.job</field>
        <field name="arch" type="xml">
            <form string="Job">
                <sheet>
                    <group string="General settings">
                        <field name="name"/>
                        <field name="job_type"/>
                        <field name="protected"/>
                        <field name="sequence"/>
                    </group>
                    <group string="Python settings" attrs="{'invisible': [('job_type', 'not in', ('python'))]}">
                        <field name="python_code" widget="ace" options="{'mode': 'python'}"/>
                        <field name="running_job"/>
                    </group>
                    <group string="Test settings" attrs="{'invisible': [('job_type', 'not in', ('python', 'test_odoo'))]}">
                        <field name="create_db"/>
                        <field name="install_modules"/>
                        <field name="custom_db_name"/>
                        <field name="db_name"/>
                        <field name="cpu_limit"/>
                        <field name="coverage"/>
                        <field name="test_enable"/>
                        <field name="test_tags"/>
                        <field name="extra_params"/>
                    </group>
                    <group string="Create settings" attrs="{'invisible': [('job_type', 'not in', ('python', 'create_build'))]}">
                        <field name="create_config_ids" widget="many2many_tags" options="{'no_create': True}" />
                        <field name="number_builds"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record id="config_form" model="ir.ui.view">
        <field name="model">runbot.job.config</field>
        <field name="arch" type="xml">
            <form string="Config">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="description"/>
                        <field name="jobs"/>
                        <field name="update_github_state"/>
                        <field name="protected"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="open_view_job_tree" model="ir.actions.act_window">
        <field name="name">Build Jobs</field>
        <field name="res_model">runbot.job</field>
        <field name="view_mode">tree,form</field>
    </record>
    <record id="open_view_job_config_tree" model="ir.actions.act_window">
        <field name="name">Build Job Configs</field>
        <field name="res_model">runbot.job.config</field>
        <field name="view_mode">tree,form</field>
    </record>
    
    <menuitem
        name="Build Jobs" 
        id="runbot_menu_job_tree"
        parent="runbot_menu_root"
        sequence="30"
        action="open_view_job_tree"
        />
    <menuitem
        name="Build Job Configs" 
        id="runbot_menu_job_config_tree"
        parent="runbot_menu_root"
        sequence="30"
        action="open_view_job_config_tree"
        />

  </data>
</odoo>
